define(["GameEngine/Events/StateEvents"],function(e){function t(){this._currentState=undefined,this._states={}}return t.prototype.addState=function(t,n){this._states[t]=n;var r=this;n.addEventListener(e.SET_NEXT_STATE,function(e){r.setCurrentState(e.data.state)})},t.prototype.setCurrentState=function(e){this._currentState&&this._currentState.stop();if(!this._states[e])throw new Error("setCurrentState called with unknown state name "+e);this._currentState=this._states[e],this._currentState.start()},t.prototype.update=function(){this._currentState.update()},t})