define([],function(){function t(){if(e!==null)throw new Error("Cannot instantiate more than one ImageLoader, use ImageLoader.getInstance()");this.initialize()}var e=null;return t.prototype={initialize:function(){this._images={},this._nbLoadingImages=0,this._onImagesLoaded=undefined},loadImage:function(e,t){var n=new Image,r=this;n.onload=function(){r._images[e]=n,r._nbLoadingImages--,0==r._nbLoadingImages&&"function"==typeof r._onImagesLoaded&&r._onImagesLoaded()},n.src=t},loadImages:function(e,t){this._onImagesLoaded=t;for(index in e){var n=e[index];this.loadImage(n.key,n.src),this._nbLoadingImages++}},getImage:function(e){return this._images[e]}},t.getInstance=function(){return e===null&&(e=new t),e},t.getInstance()})