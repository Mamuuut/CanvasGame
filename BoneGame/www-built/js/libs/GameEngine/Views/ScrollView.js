define(["GameEngine/Factories/ViewFactory","GameEngine/Helpers/ImageLoader","GameEngine/Views/Sprite","GameEngine/Views/LevelGroupView","GameEngine/Models/LevelObject"],function(e,t,n,r,i){function s(e,t){r.call(this),this._viewFactory=t,this._def=e,this._width=e.screenWidth,this._minDelay=e.viewDef.width/e.speed,this._delay=0,this._sequenceIdx=0}return extend(s,r),s.prototype.isViewOut=function(e){var t=e.getModel();return t.getX()+t.getWidth()<0},s.prototype.addView=function(e){if(0==this._delay){this._def.viewDef.x=this._width;var t=this._viewFactory.createView(this._def.viewDef);t.getModel().velocity.x=-this._def.speed,this._levelController._physicController.addObject(t.getModel()),this.add(t);var n=this._minDelay;this._def.maxDelay?n=Math.floor(Math.random()*this._def.maxDelay):this._def.sequence&&(n=this._def.sequence[this._sequenceIdx],this._sequenceIdx=(this._sequenceIdx+1)%this._def.sequence.length),this._delay=this._minDelay+n}else this._delay--},s.prototype.removeView=function(e){this.remove(e)},s.prototype.onDraw=function(e){this.addView(this._width);for(var t in this.getChildren()){var n=this.getChild(t);this.isViewOut(n)&&this.removeView(n)}s.superClass.onDraw.call(this,e)},s})